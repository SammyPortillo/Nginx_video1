<html>
	<head>
		<link rel="icon" type="image/png" href="sam.ico">
		<script>

            // https://dinbror.dk/blog/how-to-preload-entire-html5-video-before-play-solved/
			function backbuff()
			{

                // -- Create a MediaSource and attach it to the video (We already learned about that) --

                const videoTag = document.getElementById("my-video");
                const myMediaSource = new MediaSource();
                const url = URL.createObjectURL(myMediaSource);
                videoTag.src = url;

                // 1. add source buffers

                const audioSourceBuffer = myMediaSource
                .addSourceBuffer('audio/mp4; codecs="mp4a.40.2"');
                const videoSourceBuffer = myMediaSource
                .addSourceBuffer('video/mp4; codecs="avc1.64001e"');

                // 2. download and add our audio/video to the SourceBuffers

                // // for the audio SourceBuffer
                // fetch("http://73.202.21.113/media/video/elevator_pitch.MP4").then(function(response) {
                // // The data has to be a JavaScript ArrayBuffer
                // return response.arrayBuffer();
                // }).then(function(audioData) {
                // audioSourceBuffer.appendBuffer(audioData);
                // });

                // the same for the video SourceBuffer
                fetch("http://73.202.21.113/media/video/elevator_pitch.MP4").then(function(response) {
                // The data has to be a JavaScript ArrayBuffer
                return response.arrayBuffer();
                }).then(function(videoData) {
                videoSourceBuffer.appendBuffer(videoData);
                });

            }
		</script>
	</head>

	<body onload="backbuff()">

	<h3>October 17 - 4</h3>
	
        <video id="my-video" controls></video>
	</body>
</html>
